<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="description" content="MimiPro - Distributor Delivery & Business Manager">
    <title>MimiPro Admin</title>
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="assets/css/base.css">
    <link rel="stylesheet" href="assets/css/layout.css">
    <link rel="stylesheet" href="assets/css/components.css">
    <link rel="stylesheet" href="assets/css/forms.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-logo">
            <span class="logo-mimi">Mimi</span><span class="logo-pro">Pro</span>
        </div>
        <div class="header-actions">
            <span id="userInfo" class="user-info"></span>
            <button id="logoutBtn" class="btn-logout" style="display: none;">Logout</button>
        </div>
    </header>

    <!-- Main Content Area -->
    <main id="content" class="main-content">
        <!-- Page content will be loaded here dynamically -->
        <div class="loading">Loading...</div>
    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <div class="nav-item active" data-route="/dashboard">
            <div class="nav-icon">ðŸ“Š</div>
            <div class="nav-label">Dashboard</div>
        </div>
        <div class="nav-item" data-route="/delivery">
            <div class="nav-icon">ðŸ“¦</div>
            <div class="nav-label">Delivery</div>
        </div>
        <div class="nav-item" data-route="/attendance">
            <div class="nav-icon">âœ“</div>
            <div class="nav-label">Attendance</div>
        </div>
        <div class="nav-item" data-route="/reports">
            <div class="nav-icon">ðŸ“‹</div>
            <div class="nav-label">Reports</div>
        </div>
    </nav>

    <!-- Core JavaScript Files (order matters) -->
    <script src="db/indexeddb.js"></script>
    <script src="auth/session.js"></script>
    <script src="auth/admin-auth.js"></script>
    <script src="assets/js/constants.js"></script>
    <script src="assets/js/router.js"></script>
    <script src="assets/js/app.js"></script>
    
    <script>
        // Authentication check - redirect to login if not authenticated
        if (!SessionManager.isSessionValid()) {
            window.location.href = '/login.html';
        } else {
            // Display user info in header
            const session = SessionManager.getSession();
            const userInfo = document.getElementById('userInfo');
            const logoutBtn = document.getElementById('logoutBtn');
            
            if (session) {
                const role = session.isOwner ? 'Admin' : 'Employee';
                userInfo.textContent = `${session.employeeName} (${role})`;
                logoutBtn.style.display = 'inline-block';
                
                // Handle logout
                logoutBtn.addEventListener('click', () => {
                    if (confirm('Are you sure you want to logout?')) {
                        AuthManager.logout();
                    }
                });
            }
        }
    </script>
</body>
</html>
